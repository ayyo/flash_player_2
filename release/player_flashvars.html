<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
    <head>
        <title>ayyoPlayerMovie</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <script type="text/javascript" src="http://flash.staging.ayyo.ru/swfobject.js"></script>
        <script type="text/javascript" src="http://flash.staging.ayyo.ru/jquery.js"></script>
        <script type="text/javascript">

            function recieveflashevent(val1,val2){
              console.log("Event: "+val1+", "+val2);
            }

            window.flashvars = {};
            window.params = {};

            function replacePlayer(){
                swfobject.removeSWF('ayyoPlayerMovie')

                $('body').prepend('<div id="flashContent"></div>')

                var swfVersionStr = "11";
                var xiSwfUrlStr = "";

                var attributes = {
                  id: "ayyoPlayerMovie",
                  name: "ayyoPlayerMovie",
                  align: "middle"
                };

                $form = $('#flashForm');

                $('#flashvarsfs input').each(function(){
                  $input = $(this);
                  window.flashvars[$input.attr('name')] = $input.val();
                });


                var fv = $('#flashvar_get').val();
                var fvArr = fv.split('&');
                var fvObj = {};
                for(var i = 0; i<fvArr.length; i++){
                    var it = fvArr[i].split('=');
                    var name = it[0]
                    var value = it.slice(1)
                    value = value.join('=')
                    window.flashvars[name] = value;
                }

                $('#paramsfs input').each(function(){
                  $input = $(this);
                  window.params[$input.attr('name')] = $input.val();
                });

                console.log(window.flashvars, window.params)
                swfobject.createCSS("html", "height:100%; background-color: #000000;");
                swfobject.createCSS("body", "margin:0; padding:0; height:100%;");
                swfobject.embedSWF("ayyoPlayerMovie.swf", "flashContent", "850", "477",  swfVersionStr, xiSwfUrlStr, window.flashvars, window.params, attributes);
            }

              $(function(){

                $form = $('#flashForm');
                $form.submit(function(e){
                  e.preventDefault();
                  replacePlayer();

                })

                replacePlayer();
            })

        </script>
    </head>
    <body>
        <div id="flashContent"></div>
        <form id="flashForm">
            <input type="submit" value="Хочу плеер!"/></p>

            <fieldset id="flashvarsfs" style="float: left; color: white;">
                <p><label>flashvar from API</label><br> <textarea name="flashvar_get" id="flashvar_get" style="width: 100%; height: 150px;">dto_enabled=false&dtr_enabled=false&screenshot=https%3A%2F%2Fmedia.ayyo.ru%2Fmovies%2F185%2Fvideo_poster%2F850x477.jpg&streaming_price=80.00&url=http%3A%2F%2Fcdn.ayyo.ru%2Fu14%2F86%2F1b%2F95964111-3a7c-4a7b-990b-fd6650004749.f4m&streaming_enabled=true&free=false&player_type=movie&token=begintokensessionid%3Df4h0p8rl0fcbf31yp23xft6xc8pwwtws%2Ccontentid%3D1426%2Ccountrycode%3Dru%2Cclientkey%3D6f17269e454fbbd63a1e3e9727ac89%3ANO10yraUbtXS3382WHOUphPXTx0endtoken&url_forced_ru=None&buffer_size=1800&url_ru=None&4x3=false</textarea>
                <p><label>autoplay</label>             <input name="autoplay", type="text" value="false"/></p>
                <p><label>assets</label>                        <input name="assets" value='{"name":"arialFontFamily","url":"./assets/fonts/arial.swf","type":"font"};{"name":"trebuchetUppercaseNumbers","url":"./assets/fonts/trebuchet.swf","type":"font"}'/></p>
                <p><label>plugins</label>                       <input name="plugins" value='{"url":"./plugins/SubtitlesPlugin.swf", "config":"http://cdn.ayyo.ru/u22/ec/96/VForVendetta-Feat-PAL-16x9-2.35_Russian.srt"}'/></p>
            </fieldset>

            <fieldset id="paramsfs" style="float: left; color: white;">
                <p><label>quality</label>                     <input name="quality", type="text" value="best"/></p>
                <p><label>bgcolor</label>                     <input name="bgcolor", type="text" value="#000000"/></p>
                <p><label>play</label>                        <input name="play", type="text" value="true"/></p>
                <p><label>loop</label>                        <input name="loop", type="text" value="true"/></p>
                <p><label>wmode</label>                       <input name="wmode", type="text" value="transparent"/></p>
                <p><label>scale</label>                       <input name="scale", type="text" value="noscale"/></p>
                <p><label>menu</label>                        <input name="menu", type="text" value="false"/></p>
                <p><label>devicefont</label>                  <input name="devicefont", type="text" value="false"/></p>
                <p><label>salign</label>                      <input name="salign", type="text" value="lb"/></p>
                <p><label>allowscriptaccess</label>           <input name="allowscriptaccess", type="text" value="sameDomain"/></p>
                <p><label>allowFullScreenInteractive</label>  <input name="allowFullScreenInteractive", type="text" value="true"/></p>
            </fieldset>
        </form>
    </body>
</html>
